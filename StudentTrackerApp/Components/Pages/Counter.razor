@page "/counter"
@attribute [StreamRendering]
@rendermode InteractiveServer
@using Microsoft.EntityFrameworkCore.Metadata.Internal
@using Repositories
@using Models
@inject IUserRepository userrepo
@inject IStudentTeacherRepository studentteacherrepo
@inject NavigationManager Navigation
@if (showpage)
{
    <p>Create an Account</p>
    <p>Teacher or Student</p><input @bind='userType'type="text" name="userType"/>
}
Create an Account
<br />
Teacher or Student:<input @bind='userType'type="text" name="userType"/>
<br />
First Name: <input @bind='fName' type="text" name="firstName" />
<br />
Last Name:  <input @bind='lName'type="text" name="lastName" />
<br />
Email: <input @bind='email'type="text" name="email" />
<br />
Create Password: <input @bind='password'type="text" name="password" />
<br />

<button @onclick="SubmitUser">Submit</button>

@code{
    string fName = string.Empty;
    string lName = string.Empty;
    string email = string.Empty;
    string password = string.Empty;
    string userType = string.Empty;
    bool showpage = true;
    public User newUser = new();
    public async Task SubmitUser()
    {
        
        newUser.FirstName = fName;
        newUser.LastName = lName;
        newUser.Email = email;
        newUser.UserType = userType;
        newUser.Password = password;
        

        await userrepo.CreateUserAsync(newUser);
        showpage = false;
        await Task.Delay(5000);
        Navigation.NavigateTo("");
    }

}